#!/usr/bin/env node

import { spawn } from "child_process";

let input = "";

process.stdin.on("data", chunk => {
  input += chunk;
});

process.stdin.on("end", () => {
  const py = spawn("python3", ["job_fetcher.py"], { shell: true });

  py.stdin.write(input);
  py.stdin.end();

  py.stdout.on("data", data => process.stdout.write(data));
  py.stderr.on("data", data => process.stderr.write(data));

  py.on("close", code => {
    if (code !== 0) {
      process.exit(code);
    }
  });
});
